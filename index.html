<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Simple Gantt</title>
    <style>
        body {
            font-family: sans-serif;
            background: #ccc;
        }

        .container {
            width: 80%;
            margin: 0 auto;
        }

        /* custom class */
        .gantt .bar-milestone .bar {
            fill: tomato;
        }

        .heading {
            text-align: center;
        }

        .gantt-target.dark {
            background-color: #252525;
        }
    </style>
    <link rel="stylesheet" href="dist/style.css" />
    <script src="dist/frappe-gantt.umd.cjs"></script>
</head>

<body>
    <div class="container">
        <h2 class="heading">
            Interactive Gantt Chart entirely made in SVG!
        </h2>
        <div class="gantt-target"></div>
    </div>
    <script type="module">
        // import Gantt from "./dist/frappe-gantt.js";

        let tasks = [
            {
                start: '2024-08-23 00:00:00',
                end: '2024-08-23 23:59:59',
                workingDays: 1,
                name: 'Redesign website',
                id: 'Task 0',
                dependencies: [],
                color: "#ff0000"
            },
            {
                start: '2024-08-26 00:00:00',
                end: '2024-08-31 23:59:59',
                workingDays: 6,
                name: 'Write new content',
                id: 'Task 1',
                color: "#00ff00",
                dependencies: [
                    ['Task 2', 'endToStart', 3,3]
                ]
            },
            {
                start: '2024-09-04 00:00:00',
                end: '2024-09-09 23:59:59',
                workingDays: 5,
                name: 'Apply new styles',
                id: 'Task 2',
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-10 23:59:59',
                workingDays: 2,
                name: 'Review',
                id: 'Task 3',
                progress: 5,
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 4',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-21 00:00:00',
                end: '2024-09-29 23:59:59',
                workingDays: 7,
                name: 'Go Live!',
                id: 'Task 5',
                progress: 0,
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 6',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 7',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 8',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 9',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 10',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
            {
                start: '2024-09-09 00:00:00',
                end: '2024-09-11 23:59:59',
                workingDays: 3,
                name: 'Deploy',
                id: 'Task 11',
                progress: 0,
                dependencies: [],
                color: "#0000ff",
            },
        ];

        // Uncomment to test fixed header
        // tasks = [
        //     ...tasks,
        //     ...Array.from({ length: tasks.length * 3 }, (_, i) => ({
        //         ...tasks[i % 3],
        //         id: i,
        //     })),
        // ];

        let gantt_chart = new Gantt('.gantt-target', tasks, {
            on_click: (task) => {
                // console.log('Click', task);
            },
            // on_double_click: (task) => {
            //   console.log("Double Click", task);
            // },
            on_date_change: (task, start, end) => {
              console.log("Date change", task, start, end);
            },
            // on_progress_change: (task, progress) => {
            //   console.log("Progress Change", task, progress);
            // },
            // on_view_change: (mode) => {
            //   console.log("View Change", mode);
            // },
            // on_hover: (task, x, y) => {
            //   console.log("Hover", x, y);
            // },
            view_mode: 'Day',
            view_mode_padding: { DAY: '3d' },
            nonWorkingDays:{
                weekDays: [0],
                especialDays: ["2024-09-02"]
            }
            // popup: false,
            // scroll_to: 'today',
            // view_mode_select: true,
            // dates_readonly: true,
            // today_button: false,
            // readonly: true,
            // lines: 'vertical',
            // lower_text: (date) => date.getDay(),
            // upper_text: (date, view_mode, def) => def,
        });
    </script>
</body>

</html>